<!DOCTYPE html>
<html lang="{{ lang | default('ja') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ description }}">
    <title>{{ title }}</title>
    {% if favicon %}
    <link rel="icon" href="{{ favicon }}">
    {% endif %}
    {% if canonicalUrl %}
    <link rel="canonical" href="{{ canonicalUrl }}">
    {% endif %}

    {# OGP Tags #}
    <meta property="og:title" content="{{ ogTitle | default(title) }}">
    <meta property="og:description" content="{{ ogDescription | default(description) }}">
    <meta property="og:type" content="{{ ogType | default('website') }}">
    {% if canonicalUrl %}
    <meta property="og:url" content="{{ canonicalUrl }}">
    {% endif %}
    <meta property="og:site_name" content="{{ siteName }}">
    {% if ogImage %}
    <meta property="og:image" content="{{ ogImage }}">
    {% endif %}

    <link rel="stylesheet" href="{{ basePath }}/assets/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <header>
        <div class="header-content">
            <h1><a href="{{ basePath }}/{{ currentLang }}/">{{ siteName }}</a></h1>
            {% if i18n.siteDescription %}
            <p class="site-description">{{ i18n.siteDescription }}</p>
            {% endif %}
        </div>
    </header>
    <div class="container">
        <main>
            {% block content %}{% endblock %}
        </main>
        <aside class="sidebar">
            {% if avatarUrl or bio or githubUrl %}
            <div class="profile-section">
                {% if avatarUrl %}
                <img src="{{ avatarUrl }}" alt="{{ author }}" class="profile-avatar">
                {% endif %}
                {% if author %}
                <h3 class="profile-name">{{ author }}</h3>
                {% endif %}
                {% if i18n.bio %}
                <p class="profile-bio">{{ i18n.bio }}</p>
                {% endif %}
                {% if githubUrl or twitterUrl %}
                <div class="profile-links">
                    {% if githubUrl %}
                    <a href="{{ githubUrl }}" target="_blank" rel="noopener noreferrer" class="profile-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        <span>GitHub</span>
                    </a>
                    {% endif %}
                    {% if twitterUrl %}
                    <a href="{{ twitterUrl }}" target="_blank" rel="noopener noreferrer" class="profile-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endif %}
            <div class="posts-section">
                <h2>{{ i18n.recentPosts }}</h2>
                <ul class="post-list">
                    {% for post in posts %}
                    <li>
                        <a href="{{ basePath }}/{{ post.url }}">{{ post.title }}</a>
                        <time datetime="{{ post.date }}">{{ post.date }}</time>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </aside>
    </div>
    <footer>
        <div class="footer-content">
            <p>&copy; {{ currentYear }} {{ author }}</p>
            {% if repositoryUrl %}
            <p class="footer-repository">
                <a href="{{ repositoryUrl }}" target="_blank" rel="noopener noreferrer">View Source</a>
            </p>
            {% endif %}
            {% if altLang and altLangUrl %}
            <div class="footer-lang">
                <span class="footer-lang-label">Language</span>
                <span class="footer-lang-separator">/</span>
                <a href="{{ altLangUrl }}" class="footer-lang-link">
                    {% if altLang == 'en' %}English{% else %}日本語{% endif %}
                </a>
                <span class="footer-lang-separator">/</span>
                <span class="footer-lang-current">{% if currentLang == 'en' %}English{% else %}日本語{% endif %}</span>
            </div>
            {% endif %}
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
    <script src="{{ basePath }}/assets/header-scroll.js"></script>
    {% if cloudflareAnalyticsToken %}
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "{{ cloudflareAnalyticsToken }}"}'></script><!-- End Cloudflare Web Analytics -->
    {% endif %}
</body>
</html>
